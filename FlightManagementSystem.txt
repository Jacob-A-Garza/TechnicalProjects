-------------------------------------------
-- drop tables and sequences
-------------------------------------------
--drop tables
drop table Pass_Resv_Flight_Linking;
drop table Reservation;
drop table Frequent_Flyer_Profile;
drop table Passenger_Payment;
drop table Passenger;
drop table Flight;
drop table Employee;
----Drop sequences
DROP SEQUENCE employee_id_seq;
DROP SEQUENCE flight_id_seq;
DROP SEQUENCE passenger_id_seq;
DROP SEQUENCE reservation_id_seq;
DROP SEQUENCE payment_id_seq;
-------------------------------------------
-- CREATE sequences
-------------------------------------------
----Create employee_is sequence
CREATE SEQUENCE employee_id_seq
START WITH 100039 INCREMENT BY 1;
-- create flight_id sequence
CREATE SEQUENCE flight_id_seq
START WITH 99 INCREMENT BY 1;
-- create passenger_id sequence
CREATE SEQUENCE passenger_id_seq
START WITH 44 INCREMENT BY 1;
-- create reservation_id sequence
CREATE SEQUENCE reservation_id_seq
START WITH 21 INCREMENT BY 1;
-- create payment_id sequence
CREATE SEQUENCE payment_id_seq
START WITH 51 INCREMENT BY 1;
-------------------------------------------
-- CREATE tables
-------------------------------------------
CREATE TABLE Employee (
Employee_ID NUMBER default employee_id_seq.NEXTVAL PRIMARY KEY,
First_Name VARCHAR(50) NOT NULL,
Last_Name VARCHAR(50) NOT NULL,
Birthday DATE NOT NULL,
Tax_ID_Number VARCHAR(9) UNIQUE NOT NULL,
Mailing_Address VARCHAR(50) NOT NULL,
Mailing_City VARCHAR(50) NOT NULL,
Mailing_State CHAR(2) NOT NULL,
Mailing_Zip CHAR(5) NOT NULL,
Emp_Level CHAR(1) NOT NULL,
constraint employee_level_check CHECK (Emp_Level in (1,2,3))
);
CREATE TABLE Flight (
Flight_ID NUMBER default flight_id_seq.NEXTVAL PRIMARY KEY,
Flight_Number VARCHAR(4) NOT NULL,
Departure_DateTime DATE NOT NULL,
Departure_City CHAR(3) NOT NULL,
Arrival_City CHAR(3) NOT NULL,
Assigned_Employee NUMBER,
CONSTRAINT employee_id_fk FOREIGN KEY (Assigned_Employee) REFERENCES employee
(employee_id)
);
CREATE TABLE Passenger (
Passenger_ID NUMBER default passenger_id_seq.NEXTVAL PRIMARY
KEY,
First_Name VARCHAR(50) NOT NULL,
Middle_Name VARCHAR(50),
Last_Name VARCHAR(50) NOT NULL,
Email VARCHAR(50) UNIQUE NOT NULL,
Gender CHAR(1) NOT NULL,
Country_of_Residence VARCHAR(50) NOT NULL,
State_of_Residence CHAR(2) NOT NULL,
Mailing_Address_1 VARCHAR(50) NOT NULL,
Mailing_Address_2 VARCHAR(50),
Mailing_City VARCHAR(50) NOT NULL,
Mailing_State CHAR(2) NOT NULL,
Mailing_Zip CHAR(5) NOT NULL,
Primary_Phone CHAR(12) NOT NULL,
Secondary_Phone CHAR(12),
CONSTRAINT EMAIL_LENGTH_CHECK CHECK (LENGTH(Email) >= 7)
);
CREATE TABLE Passenger_Payment (
Payment_ID NUMBER default payment_id_seq.NEXTVAL PRIMARY KEY,
Passenger_ID NUMBER NOT NULL,
Cardholder_First_Name VARCHAR(40) NOT NULL,
Cardholder_Mid_Name VARCHAR(40),
Cardholder_Last_Name VARCHAR(40) NOT NULL,
CardType VARCHAR(20) NOT NULL,
CardNumber VARCHAR(16) NOT NULL,
Expiration_Date DATE NOT NULL,
CC_ID VARCHAR(4) NOT NULL,
Billing_Address VARCHAR(50) NOT NULL,
Billing_City VARCHAR(50) NOT NULL,
Billing_State CHAR(2) NOT NULL,
Billing_Zip CHAR(5) NOT NULL,
CONSTRAINT passenger_id_fk FOREIGN KEY (Passenger_ID) REFERENCES Passenger
(Passenger_ID)
);
CREATE TABLE Frequent_Flyer_Profile (
Passenger_ID NUMBER PRIMARY KEY,
Frequent_Flyer_ID VARCHAR(8) UNIQUE NOT NULL,
FF_Password VARCHAR(30) NOT NULL,
FF_Level VARCHAR(2) NOT NULL,
Miles_Balance NUMBER DEFAULT 5000 NOT NULL,
CONSTRAINT frequent_flyer_fk FOREIGN KEY (Passenger_ID) REFERENCES Passenger
(Passenger_ID),
CONSTRAINT FF_LEVEL_CHECK CHECK (FF_Level IN ('B','S','G','P'))
);
CREATE TABLE Reservation (
Reservation_ID NUMBER default reservation_id_seq.NEXTVAL PRIMARY
KEY,
Confirmation_Number VARCHAR(6) unique NOT NULL,
Date_Booked DATE default sysdate NOT NULL,
Trip_Contact_Email VARCHAR(50) NOT NULL,
Trip_Contact_Phone VARCHAR(12) NOT NULL
);
CREATE TABLE Pass_Resv_Flight_Linking (
Passenger_ID NUMBER,
Reservation_ID NUMBER,
Flight_ID NUMBER,
Seat_Assignment VARCHAR(4),
Ticket_Number VARCHAR(6),
Checked_In_Flag CHAR(1) default 'N' NOT NULL,
Boarded_Flag CHAR(1) default 'N' NOT NULL,
CONSTRAINT resv_flight_pk PRIMARY KEY (Passenger_ID,Reservation_ID, Flight_ID),
CONSTRAINT passenger_id_link_fk FOREIGN KEY (Passenger_ID) REFERENCES
Passenger (Passenger_ID),
CONSTRAINT reservation_id_link_fk FOREIGN KEY (Reservation_ID) REFERENCES
reservation (Reservation_ID),
CONSTRAINT flight_id_link_fk FOREIGN KEY (Flight_ID) REFERENCES
flight (Flight_ID),
CONSTRAINT y_or_n_flag_check CHECK (Checked_In_Flag in ('N','Y'))
);
-------------------------------------------------------------
-- SEED DATA
-------------------------------------------------------------
--INSERT EMPLOYEES
SET DEFINE OFF
INSERT INTO EMPLOYEE (EMPLOYEE_ID, FIRST_NAME, LAST_NAME, BIRTHDAY, TAX_ID_NUMBER,
MAILING_ADDRESS, MAILING_CITY, MAILING_STATE, MAILING_ZIP, EMP_LEVEL)
VALUES (100001, 'Fionna', 'Aseef', to_date('07-Aug-1960', 'DD-MON-RR'),
'806816460', '9 Westridge Drive', 'Las Vegas', 'NV', '89502', '1');
INSERT INTO EMPLOYEE (EMPLOYEE_ID, FIRST_NAME, LAST_NAME, BIRTHDAY, TAX_ID_NUMBER,
MAILING_ADDRESS, MAILING_CITY, MAILING_STATE, MAILING_ZIP, EMP_LEVEL)
VALUES (100002, 'Fran', 'Fridaye', to_date('06-Nov-1960', 'DD-MON-RR'),
'286747809', '2619 Lien Center', 'Dallas', 'TX', '75111', '2');
INSERT INTO EMPLOYEE (EMPLOYEE_ID, FIRST_NAME, LAST_NAME, BIRTHDAY, TAX_ID_NUMBER,
MAILING_ADDRESS, MAILING_CITY, MAILING_STATE, MAILING_ZIP, EMP_LEVEL)
VALUES (100008, 'Brion', 'Bails', to_date('30-Aug-1962', 'DD-MON-RR'), '745318150',
'6 Drewry Street', 'Denver', 'CO', '80216', '2');
Commit;
--INSERT Flights
INSERT INTO FLIGHT (FLIGHT_ID, FLIGHT_NUMBER, DEPARTURE_DATETIME, DEPARTURE_CITY,
ARRIVAL_CITY, ASSIGNED_EMPLOYEE) VALUES (92,'386',TO_DATE('03-MAR-24 01:00 PM','DD-
MON-YY HH:MI AM'),'LAS','PHX',100001);
INSERT INTO FLIGHT (FLIGHT_ID, FLIGHT_NUMBER, DEPARTURE_DATETIME, DEPARTURE_CITY,
ARRIVAL_CITY, ASSIGNED_EMPLOYEE) VALUES (93,'307',TO_DATE('03-MAR-24 01:30 PM','DD-
MON-YY HH:MI AM'),'SAN','PHX',100006);
INSERT INTO FLIGHT (FLIGHT_ID, FLIGHT_NUMBER, DEPARTURE_DATETIME, DEPARTURE_CITY,
ARRIVAL_CITY, ASSIGNED_EMPLOYEE) VALUES (94,'363',TO_DATE('03-MAR-24 04:30 PM','DD-
MON-YY HH:MI AM'),'PHX','SAT',100035);
Commit;
--INSERT Passengers;
INSERT INTO PASSENGER (PASSENGER_ID, FIRST_NAME, MIDDLE_NAME, LAST_NAME, EMAIL,
GENDER, COUNTRY_OF_RESIDENCE, STATE_OF_RESIDENCE, MAILING_ADDRESS_1,
MAILING_ADDRESS_2, MAILING_CITY, MAILING_STATE, MAILING_ZIP, PRIMARY_PHONE,
SECONDARY_PHONE)
VALUES (1, 'Jamill', 'K', 'Kemm', 'jamillkemm@pmail.com', 'F', 'United States',
'TX', '9 Burrows Avenue', 'Apartment #456', 'Fort Worth', 'TX', '81287', '713-105-
7858', NULL);
INSERT INTO PASSENGER (PASSENGER_ID, FIRST_NAME, MIDDLE_NAME, LAST_NAME, EMAIL,
GENDER, COUNTRY_OF_RESIDENCE, STATE_OF_RESIDENCE, MAILING_ADDRESS_1,
MAILING_ADDRESS_2, MAILING_CITY, MAILING_STATE, MAILING_ZIP, PRIMARY_PHONE,
SECONDARY_PHONE)
VALUES (2, 'Malory', 'Gawen', 'Buttrum', 'malorybuttrum@pmail.com', 'F', 'United
States', 'TX', '34 Hudson Lane', NULL, 'Dallas', 'TX', '58858', '228-598-2384',
'254-177-0516');
INSERT INTO PASSENGER (PASSENGER_ID, FIRST_NAME, MIDDLE_NAME, LAST_NAME, EMAIL,
GENDER, COUNTRY_OF_RESIDENCE, STATE_OF_RESIDENCE, MAILING_ADDRESS_1,
MAILING_ADDRESS_2, MAILING_CITY, MAILING_STATE, MAILING_ZIP, PRIMARY_PHONE,
SECONDARY_PHONE)
VALUES (3, 'Oren', 'Sondra', 'Darycott', 'orendarycott@pmail.com', 'M', 'United
States', 'TX', '8 North Parkway', NULL, 'Houston', 'TX', '48361', '512-975-6255',
NULL);
Commit;
--INSERT Passenger_Payments;
Insert into PASSENGER_PAYMENT
(PAYMENT_ID,PASSENGER_ID,CARDHOLDER_FIRST_NAME,CARDHOLDER_MID_NAME,CARDHOLDER_LAST_
NAME,CARDTYPE,CARDNUMBER,EXPIRATION_DATE,CC_ID,BILLING_ADDRESS,BILLING_CITY,BILLING
_STATE,BILLING_ZIP) values
(1,1,'Jamill','K','Kemm','DEBIT','5610539134084680',last_day(to_date('01-DEC-
23','DD-MON-RR')),'520','9 Burrows Avenue','Fort Worth','TX','81287');
Insert into PASSENGER_PAYMENT
(PAYMENT_ID,PASSENGER_ID,CARDHOLDER_FIRST_NAME,CARDHOLDER_MID_NAME,CARDHOLDER_LAST_
NAME,CARDTYPE,CARDNUMBER,EXPIRATION_DATE,CC_ID,BILLING_ADDRESS,BILLING_CITY,BILLING
_STATE,BILLING_ZIP) values
(2,2,'Malory','G','Buttrum','MCARD','5100174646618740',last_day(to_date('01-DEC-
23','DD-MON-RR')),'364','34 Hudson Lane','Dallas','TX','63683');
Insert into PASSENGER_PAYMENT
(PAYMENT_ID,PASSENGER_ID,CARDHOLDER_FIRST_NAME,CARDHOLDER_MID_NAME,CARDHOLDER_LAST_
NAME,CARDTYPE,CARDNUMBER,EXPIRATION_DATE,CC_ID,BILLING_ADDRESS,BILLING_CITY,BILLING
_STATE,BILLING_ZIP) values
(3,3,'Oren','Sondra','Darycott','MCARD','5545911503313990',last_day(to_date('01-
DEC-23','DD-MON-RR')),'968','1826 Easy St','Houston','TX','33221');
Commit;
--INSERT Frequent_Flyer_Profiles;
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (1, 'T31L947', '2WUlMcAkU', 'P', 84088);
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (2, 'A58T922', 'rGPjvo', 'S', 13178);
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (5, 'S41B293', 'BTiAfyBubFY', 'S', 14583);
Commit;
--INSERT Frequent_Flyer_Profiles;
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (1, 'T31L947', '2WUlMcAkU', 'P', 84088);
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (2, 'A58T922', 'rGPjvo', 'S', 13178);
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (5, 'S41B293', 'BTiAfyBubFY', 'S', 14583);
Commit;
--INSERT Reservation;
INSERT INTO RESERVATION (RESERVATION_ID, CONFIRMATION_NUMBER, DATE_BOOKED,
TRIP_CONTACT_EMAIL, TRIP_CONTACT_PHONE)
VALUES (1, 'YOUWTS', to_date('20-Jan-2020', 'DD-MON-RR'),VALUES (20, 'C48H134', 'zM225JdgL', 'B', 5000);
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (21, 'L57V795', 'VbTcKViZLA', 'P', 153218);
INSERT INTO FREQUENT_FLYER_PROFILE (PASSENGER_ID, FREQUENT_FLYER_ID, FF_PASSWORD,
FF_LEVEL, MILES_BALANCE)
VALUES (22, 'Z79T522', 'JaljOki', 'B', 7962);
Commit;
--INSERT Reservation;
INSERT INTO RESERVATION (RESERVATION_ID, CONFIRMATION_NUMBER, DATE_BOOKED,
TRIP_CONTACT_EMAIL, TRIP_CONTACT_PHONE)
VALUES (1, 'YOUWTS', to_date('20-Jan-2020', 'DD-MON-RR'),
'mikkelkilbane@pmail.com', '713-761-9173');
INSERT INTO RESERVATION (RESERVATION_ID, CONFIRMATION_NUMBER, DATE_BOOKED,
TRIP_CONTACT_EMAIL, TRIP_CONTACT_PHONE)
VALUES (2, 'JXZTLS', to_date('21-Jan-2020', 'DD-MON-RR'),
'marketascroggie@pmail.com', '936-652-7953');
INSERT INTO RESERVATION (RESERVATION_ID, CONFIRMATION_NUMBER, DATE_BOOKED,
TRIP_CONTACT_EMAIL, TRIP_CONTACT_PHONE)
VALUES (3, 'QKXEWR', to_date('21-Jan-2020', 'DD-MON-RR'),
'christidubery@pmail.com', '361-603-2341');
COMMIT;
----------------------------------------------------------------
-- CREATE INDEXES
----------------------------------------------------------------
CREATE INDEX passenger_payment_passenger_id_ix
ON passenger_payment (passenger_id);
CREATE INDEX flight_assigned_employee_ix
ON flight (assigned_employee);
CREATE INDEX passenger_last_name_ix
ON passenger (last_name);
CREATE INDEX passenger_mailing_address_1_ix
ON passenger (mailing_address_1);
CREATE INDEX passenger_primary_phone_ix
ON passenger (primary_phone);
